<% if Rails.env.development? %>
  <div class="fixed top-0 left-0 w-full bg-yellow-100 border-b border-yellow-300 p-2 z-50 flex items-center justify-between shadow-sm text-sm">
    <div class="flex items-center gap-2">
      <span class="font-bold text-yellow-800">ðŸ›  Time Travel:</span>
      <span class="text-gray-800 font-mono"><%= Time.current.strftime("%Y-%m-%d %H:%M:%S") %></span>
      <% if session[:virtual_time].present? %>
        <span class="bg-red-500 text-white text-xs px-2 py-0.5 rounded">Active</span>
      <% end %>
    </div>
    
    <%= form_with url: student_development_time_travel_path, method: :post, class: "flex items-center gap-2", local: true do |f| %>
      <%= f.datetime_local_field :virtual_time, value: Time.current.strftime("%Y-%m-%dT%H:%M"), class: "px-2 py-1 text-xs border rounded" %>
      <%= f.button "Set", name: "commit", value: "set", class: "bg-yellow-500 text-white px-3 py-1 rounded text-xs hover:bg-yellow-600" %>
      <%= f.button "Reset", name: "virtual_time", value: "", class: "bg-gray-500 text-white px-3 py-1 rounded text-xs hover:bg-gray-600" %>
    <% end %>
  </div>
<% end %>

<div class="container mx-auto px-4 py-8 max-w-7xl" 
      data-controller="tabs attendance-modal"
      data-tabs-default-tab-value="register">

  <!-- Mobile Tabs (mdä»¥ä¸Šã§éžè¡¨ç¤º) -->
  <div class="md:hidden border-b border-gray-200 mb-6 sticky top-0 bg-white z-10">
    <nav class="-mb-px flex space-x-8" aria-label="Tabs">
      <a href="#" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"
          data-tabs-target="tab" 
          data-action="tabs#switch" 
          data-tab-id="register">
        å‡ºå¸­ç™»éŒ² & ç´¯è¨ˆ
      </a>
      <a href="#" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200"
          data-tabs-target="tab" 
          data-action="tabs#switch" 
          data-tab-id="history">
        æœˆåˆ¥ä¸€è¦§
      </a>
    </nav>
  </div>

  <div class="space-y-8">
    <!-- ä¸Šæ®µ: æœ¬æ—¥ã®å‡ºå¸­ç™»éŒ² -->
    <!-- Mobile: "register" ã‚¿ãƒ–ã®æ™‚ã ã‘è¡¨ç¤º (md:block ã§PCæ™‚å¼·åˆ¶è¡¨ç¤º) -->
    <div data-tabs-target="panel" data-tab-id="register" class="md:block">
      <%= render "attendance_form", periods: @facade.periods, today_attendances: @facade.today_attendances %>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
      <!-- ä¸‹æ®µå·¦: å¹´é–“ç´¯è¨ˆ -->
      <!-- Mobile: "register" ã‚¿ãƒ–ã®æ™‚ã ã‘è¡¨ç¤º (md:block ã§PCæ™‚å¼·åˆ¶è¡¨ç¤º) -->
      <div data-tabs-target="panel" data-tab-id="register" class="md:block h-full">
        <%= render "attendances/year_summary_stats", stats: @facade.stats %>
      </div>

      <!-- ä¸‹æ®µå³: å‡ºå¸­ä¸€è¦§ -->
      <!-- Mobile: "history" ã‚¿ãƒ–ã®æ™‚ã ã‘è¡¨ç¤º (md:block ã§PCæ™‚å¼·åˆ¶è¡¨ç¤º) -->
      <div data-tabs-target="panel" data-tab-id="history" class="hidden md:block h-full">
        <%= render "monthly_attendance_history", facade: @facade %>
      </div>
    </div>
  </div>
</div>
